# è¯´æ˜ï¼šè¿˜æ²¡å†™

## è¾“å…¥è¾“å‡ºå³è¦æ±‚æ ‡å‡†è§docx/æ ‡å‡†è¦æ±‚.md

## è®¾è®¡è§docx/æ€»ä½“è®¾è®¡.md

## ä¸šåŠ¡éœ€æ±‚

### åŸºæœ¬è¦æ±‚

è®¾è®¡å¹¶å®ç°ä¸€ä¸ªä¹¦åº—ç®¡ç†ç³»ç»Ÿï¼Œæœ€ç»ˆäº¤æ¥ç‰©ä¸ºå¼€å‘æ–‡æ¡£å’Œæºä»£ç ã€‚å…³äºç¨‹åºæœ‰ä»¥ä¸‹è¦æ±‚ï¼š

- ç¼–ç¨‹è¯­è¨€é™åˆ¶ï¼šè½¯ä»¶ä¸»ä½“ï¼ˆé™¤ bonus éƒ¨åˆ†å¤–ï¼‰å®Œå…¨ä½¿ç”¨ C++ ç¼–å†™ï¼›
- ç¨‹åºæ•°æ®éœ€è¦è®°å½•åˆ°æ–‡ä»¶ï¼›
- ç¨‹åºé¦–æ¬¡è¿è¡Œæ—¶è‡ªä¸»æ‰§è¡Œæ‰€éœ€çš„åˆå§‹åŒ–æ“ä½œï¼›
  - åˆ›å»ºå¸æˆ·åä¸º `root`ï¼Œå¯†ç ä¸º `sjtu`ï¼Œæƒé™ä¸º {7} çš„è¶…çº§ç®¡ç†å‘˜å¸æˆ·ã€‚
- ç¨‹åºå¯åŠ¨åï¼Œæ ¹æ®è¾“å…¥æ•°æ®æ‰§è¡Œå¯¹åº”æ“ä½œï¼Œç›´è‡³è¯»å…¥ EOF æˆ–æ ¹æ®ç›¸å…³æŒ‡ä»¤è¦æ±‚ç»ˆæ­¢è¿è¡Œã€‚

### äº¤äº’æ–¹å¼

ä½¿ç”¨å‘½ä»¤è¡Œï¼ˆWindows CMD æˆ– Linux Terminalï¼‰è¿›è¡Œæ“ä½œï¼Œè¾“å…¥æ•°æ®ä»¥æ¢è¡Œç¬¦æˆ–å›è½¦ç¬¦ä¸ºåˆ†éš”ä¸ºè‹¥å¹²æŒ‡ä»¤ã€‚

æŒ‡ä»¤åˆæ³•å­—ç¬¦é›†ä¸ºæ ‡å‡† ASCII å­—ç¬¦ï¼›å…è®¸çš„ç©ºç™½ç¬¦ä»…ä¸ºç©ºæ ¼ï¼Œå•ä¸ªæŒ‡ä»¤è¢«ç©ºæ ¼åˆ†å‰²ä¸ºå¤šä¸ªéƒ¨åˆ†ã€‚å¤šä¸ªè¿ç»­ç©ºæ ¼æ•ˆæœä¸ä¸€ä¸ªç©ºæ ¼ç­‰ä»·ï¼›è¡Œé¦–è¡Œæœ«å…è®¸å‡ºç°å¤šä½™ç©ºæ ¼ï¼›å¦‚æ— ç‰¹æ®Šè¯´æ˜ç¦æ­¢çœç•¥æˆ–å¦å¢ç©ºæ ¼ã€‚

æŒ‡ä»¤ä¸­ç¬¬ä¸€ä¸ªéƒ¨åˆ†å¿…é¡»ä¸ºæŒ‡ä»¤å…³é”®è¯ï¼ŒæŒ‡ä»¤ä¸­å…³é”®è¯éƒ¨åˆ†å¿…é¡»ä¸æŒ‡ä»¤æ ¼å¼å®Œå…¨åŒ¹é…ã€‚

æœ¬æ–‡æ¡£ä¸­ä»¥å¼±åŒ–çš„æ­£åˆ™è¯­æ³•è¯´æ˜æŒ‡ä»¤æ–‡æ³•ã€‚åˆæ³•æŒ‡ä»¤çš„æ–‡æ³•ç›¸å…³è¯´æ˜å¦‚ä¸‹ï¼š

- `[x]` è¡¨ç¤ºä¸€ä¸²æœ‰ç‰¹å®šé™åˆ¶çš„ç”¨æˆ·è‡ªå®šä¹‰å­—ç¬¦ä¸²ï¼›
- `(a|b|c)` è¡¨ç¤ºæ­¤å¤„ä»…èƒ½å‡ºç° `a`, `b`, `c` ä¸­å…¶ä¸€ï¼›
- `(x)?` è¡¨ç¤ºæ­¤å¤„å¯ä»¥å‡ºç°é›¶æ¬¡æˆ–ä¸€æ¬¡ `x`ï¼›
- `(x)+` è¡¨ç¤ºæ­¤å¤„å¯ä»¥å‡ºç°ä¸€æ¬¡æˆ–å¤šæ¬¡ `x`ã€‚

åˆæ³•çš„æŒ‡ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼šï¼ˆ`#` å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šï¼‰

```
# åŸºç¡€æŒ‡ä»¤
quit
exit

# å¸æˆ·ç³»ç»ŸæŒ‡ä»¤
su [UserID] ([Password])?
logout
register [UserID] [Password] [Username]
passwd [UserID] ([CurrentPassword])? [NewPassword]
useradd [UserID] [Password] [Privilege] [Username]
delete [UserID]

# å›¾ä¹¦ç³»ç»ŸæŒ‡ä»¤
show (-ISBN=[ISBN] | -name="[BookName]" | -author="[Author]" | -keyword="[Keyword]")?
buy [ISBN] [Quantity]
select [ISBN]
modify (-ISBN=[ISBN] | -name="[BookName]" | -author="[Author]" | -keyword="[Keyword]" | -price=[Price])+
import [Quantity] [TotalCost]

# æ—¥å¿—ç³»ç»ŸæŒ‡ä»¤
show finance ([Count])?
log
report finance
report employee
```

åœ¨ç”¨æˆ·è¾“å…¥ä¸€æ¡æŒ‡ä»¤åï¼Œå¦‚æœåˆæ³•åˆ™æ‰§è¡Œå¯¹åº”æ“ä½œï¼Œå¦‚æœæœ‰åˆ™è¾“å‡ºæ“ä½œç»“æœï¼›å¦‚æœæŒ‡ä»¤éæ³•æˆ–æ“ä½œå¤±è´¥åˆ™è¾“å‡º `Invalid\n`ã€‚ä»…æœ‰ç©ºæ ¼çš„æŒ‡ä»¤åˆæ³•ä¸”æ— è¾“å‡ºå†…å®¹ã€‚

é™¤éæœ‰ç‰¹æ®Šè¯´æ˜ï¼Œå¦‚æœè¾“å…¥æŒ‡ä»¤å¯¹åº”çš„è¾“å‡ºå†…å®¹éç©ºï¼Œåˆ™ç»“å°¾æœ‰ `\n` å­—ç¬¦ï¼›è¾“å‡ºå†…å®¹ä¸ºç©ºåˆ™ä¸è¾“å‡ºä»»ä½•å­—ç¬¦ã€‚

`quit` å’Œ `exit` æŒ‡ä»¤åŠŸèƒ½ä¸ºæ­£å¸¸é€€å‡ºç³»ç»Ÿã€‚

### å¸æˆ·ç³»ç»Ÿ

ä¹¦åº—ç®¡ç†ç³»ç»ŸæœåŠ¡äº **åº—ä¸»ï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰**ï¼Œ**å‘˜å·¥ï¼ˆç®¡ç†å‘˜ï¼‰ä»¥åŠé¡¾å®¢ï¼ˆç”¨æˆ·ï¼‰**ã€‚ä¸ºæ»¡è¶³å…¶ä¸åŒéœ€æ±‚ï¼Œæ•…éœ€å¸æˆ·ç³»ç»Ÿç®¡ç†å¸æˆ·åŠæƒé™æ•°æ®ï¼Œå¹¶æä¾›ç›¸åº”åŠŸèƒ½ã€‚

#### æƒé™

æœ¬æ–‡æ¡£ä¸­ä»¥ {x} è¡¨ç¤ºæƒé™ç­‰çº§ï¼Œæ•°å­—è¶Šå¤§åˆ™æƒé™è¶Šé«˜ã€‚å¸æˆ·çš„æƒé™ç­‰çº§æœ‰ {7}, {3} å’Œ {1}ï¼›æœªç™»å½•ä»»ä½•å¸æˆ·çš„çŠ¶æ€ä¸‹å½“å‰å¸æˆ·æƒé™è§†ä¸º {0}ã€‚ä½æƒé™å¸æˆ·èƒ½å¤Ÿè®¿é—®çš„åŠŸèƒ½ä¸¥æ ¼æ˜¯é«˜æƒé™å¸æˆ·èƒ½å¤Ÿè®¿é—®çš„åŠŸèƒ½çš„å­é›†ï¼ŒæŒ‡ä»¤çš„æƒé™ç­‰çº§è¡¨ç¤ºèƒ½å¤Ÿæ‰§è¡Œè¯¥æŒ‡ä»¤çš„æœ€ä½å½“å‰å¸æˆ·æƒé™éœ€æ±‚ã€‚æ¢å¥è¯è¯´ï¼Œé«˜æƒé™çš„å¸æˆ·å¯ä»¥æ‰§è¡Œéœ€è¦ä½æƒé™çš„æŒ‡ä»¤ï¼Œåä¹‹åˆ™ä¸å¯ã€‚

#### å„æƒé™å¯è®¿é—®åŠŸèƒ½

- **åº—ä¸» {7}**ï¼šä½¿ç”¨ `root` å¸æˆ·ï¼Œå¯ä»¥è®¿é—®ä¹¦åº—ç³»ç»Ÿæ‰€æœ‰åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ—¥å¿—å’Œå¸æˆ·ç®¡ç†åŠŸèƒ½ï¼›
- **å‘˜å·¥ {3}**ï¼šå¯ä»¥è®¿é—®ä¿®æ”¹å›¾ä¹¦æ•°æ®ç›¸å…³åŠŸèƒ½ç­‰ï¼›
- **é¡¾å®¢ {1}**ï¼šå¯ä»¥æ³¨å†Œå¸æˆ·ï¼ŒæŸ¥è¯¢ã€è´­ä¹°å›¾ä¹¦ï¼›
- **æ¸¸å®¢ {0}**ï¼šå¯ä»¥æ³¨å†Œå¸æˆ·ã€‚

æœ¬ç³»ç»Ÿä¸­æœ‰ä¸”ä»…æœ‰ä»¥ä¸Šå››ç§æƒé™ç­‰çº§ï¼Œå…¶ä½™æƒé™ç­‰çº§éæ³•ã€‚

#### ç™»å½•æ ˆ

ç³»ç»Ÿæ”¯æŒåµŒå¥—ç™»å½•ï¼Œå³å…è®¸å¤šä¸ªå¸æˆ·åŒæ—¶å¤„äºç™»å½•çŠ¶æ€ï¼›å…è®¸åŒä¸€å¸æˆ·åŒæ—¶å¤šæ¬¡ç™»å½•ã€‚è¾“å…¥çš„æŒ‡ä»¤è§†ä¸ºæœ€åç™»å½•çš„å¸æˆ·æ“ä½œã€‚é€€å‡ºç³»ç»Ÿè§†ä¸ºç™»å‡ºæ‰€æœ‰å·²ç™»å½•å¸æˆ·ã€‚

ç¤ºä¾‹ï¼šï¼ˆå‡è®¾æ‰€æœ‰ç”¨æˆ·å‡å­˜åœ¨ï¼Œæ‰€æœ‰å¯†ç å‡æ­£ç¡®ï¼‰

```bash
# åˆå§‹æ—¶ç™»å½•æ ˆä¸ºç©º
su root sjtu
select first
# æ­¤æ—¶ç™»å½•æ ˆä¸º rootï¼Œé€‰æ‹©çš„ä¹¦ä¸º first

su root sjtu
# æ­¤æ—¶ç™»å½•æ ˆä¸º root rootï¼Œæ²¡æœ‰é€‰æ‹©çš„ä¹¦
select second

su zhang beihai
select third
# æ­¤æ—¶ç™»å½•æ ˆä¸º root root zhangï¼Œé€‰æ‹©çš„ä¹¦ä¸º third
# æ“ä½œçš„ç”¨æˆ·ä¸º zhangï¼Œæ— æ³•æ‰§è¡Œ delete ç­‰å‘½ä»¤

su chu yan
# æ­¤æ—¶ç™»å½•æ ˆä¸º root root zhang chuï¼Œæ“ä½œçš„ç”¨æˆ·ä¸º chuï¼Œæ²¡æœ‰é€‰æ‹©çš„ä¹¦

logout
# æ­¤æ—¶ç™»å½•æ ˆä¸º root root zhangï¼Œé€‰æ‹©çš„ä¹¦ä¸º third

logout
# æ­¤æ—¶ç™»å½•æ ˆä¸º root rootï¼Œé€‰æ‹©çš„ä¹¦ä¸º second

logout
# æ­¤æ—¶ç™»å½•æ ˆä¸º rootï¼Œé€‰æ‹©çš„ä¹¦ä¸º first
```

#### å¸æˆ·ä¿¡æ¯

å…³äºæŒ‡ä»¤æ ¼å¼ä¸­çš„ç”¨æˆ·è‡ªå®šä¹‰å­—ç¬¦ä¸²é™å®šå¦‚ä¸‹ï¼Œå…¶ä¸­ã€Œæœ€å¤§é•¿åº¦ã€å«ä¹‰ä¸ºè¯¥å­—ç¬¦ä¸²æ‰€å å­˜å‚¨ç©ºé—´ä¸èƒ½è¶…è¿‡æŒ‡å®šæ•°ç›®çš„è‹±æ–‡å­—æ¯å­—ç¬¦æ‰€å å­˜å‚¨ç©ºé—´ã€‚

- `[UserID]`, `[Password]`, `[CurrentPassword]`, `[NewPassword]`
  - åˆæ³•å­—ç¬¦é›†ï¼šæ•°å­—ï¼Œå­—æ¯ï¼Œä¸‹åˆ’çº¿ï¼›
  - æœ€å¤§é•¿åº¦ï¼š30ã€‚
- `[Username]`
  - åˆæ³•å­—ç¬¦é›†ï¼šé™¤ä¸å¯è§å­—ç¬¦ä»¥å¤– ASCII å­—ç¬¦ï¼›
  - æœ€å¤§é•¿åº¦ï¼š30ã€‚
- `[Privilege]`
  - åˆæ³•å­—ç¬¦é›†ï¼šæ•°å­—ï¼›
  - æœ€å¤§é•¿åº¦ï¼š1ã€‚

å‡ºç°ä¸ç¬¦åˆä¸Šè¿°é™å®šçš„è‡ªå®šä¹‰å­—ç¬¦ä¸²çš„æŒ‡ä»¤è§†ä¸ºéæ³•ï¼Œä¸‹åŒã€‚

#### å¸æˆ·ç›¸å…³æŒ‡ä»¤

æœ¬æ–‡æ¡£ä¸­æŒ‡ä»¤è¯´æ˜æ ¼å¼å¦‚ä¸‹ï¼š

- **æŒ‡ä»¤åç§°**
  - {æŒ‡ä»¤æƒé™}  `[æŒ‡ä»¤æ ¼å¼]`
  - æŒ‡ä»¤åŠŸèƒ½
  - æŒ‡ä»¤é€»è¾‘ï¼ˆæ¡æ•°ä¸å®šï¼Œå„é€»è¾‘é—´ä¼˜å…ˆé¡ºåºåŒåˆ—ä¸¾é¡ºåºï¼‰

ä»¥ä¸‹ä¸ºæŒ‡ä»¤è¯´æ˜ã€‚

- **ç™»å½•å¸æˆ·**
  - {0} `su [UserID] ([Password])?`
  - ä½¿ç™»å½•å¸æˆ·å˜ä¸ºå·²ç™»å½•çŠ¶æ€ï¼Œå½“å‰å¸æˆ·å˜ä¸ºè¯¥å¸æˆ·ã€‚
    - å¦‚æœè¯¥å¸æˆ·ä¸å­˜åœ¨åˆ™æ“ä½œå¤±è´¥ï¼›
    - å¦‚æœå¯†ç é”™è¯¯åˆ™æ“ä½œå¤±è´¥ï¼›
    - å¦‚æœå½“å‰å¸æˆ·æƒé™ç­‰çº§é«˜äºç™»å½•å¸æˆ·åˆ™å¯ä»¥çœç•¥å¯†ç ã€‚
- **æ³¨é”€å¸æˆ·**
  - {1} `logout`
  - æ’¤é”€æœ€åä¸€æ¬¡æˆåŠŸæ‰§è¡Œçš„ `su` æŒ‡ä»¤æ•ˆæœã€‚
    - å¦‚æ— å·²ç™»å½•å¸æˆ·åˆ™æ“ä½œå¤±è´¥ã€‚
- **æ³¨å†Œå¸æˆ·**
  - {0} `register [UserID] [Password] [Username]`
  - æ³¨å†Œä¿¡æ¯å¦‚æŒ‡ä»¤æ ¼å¼æ‰€ç¤ºï¼Œæƒé™ç­‰çº§ä¸º {1} çš„å¸æˆ·ã€‚
    - å¦‚æœ `[UserID]` ä¸å·²æ³¨å†Œå¸æˆ·é‡å¤åˆ™æ“ä½œå¤±è´¥ã€‚
- **ä¿®æ”¹å¯†ç **
  - {1} `passwd [UserID] ([CurrentPassword])? [NewPassword]`
  - ä¿®æ”¹æŒ‡å®šå¸æˆ·çš„å¯†ç ã€‚
    - å¦‚æœè¯¥å¸æˆ·ä¸å­˜åœ¨åˆ™æ“ä½œå¤±è´¥ï¼›
    - å¦‚æœå¯†ç é”™è¯¯åˆ™æ“ä½œå¤±è´¥ï¼›
    - å¦‚æœå½“å‰å¸æˆ·æƒé™ç­‰çº§ä¸º {7} åˆ™å¯ä»¥çœç•¥ `[CurrentPassword]`ã€‚
- **åˆ›å»ºå¸æˆ·**
  - {3} `useradd [UserID] [Password] [Privilege] [Username]`
  - åˆ›å»ºä¿¡æ¯å¦‚æŒ‡ä»¤æ ¼å¼æ‰€ç¤ºçš„å¸æˆ·ã€‚
    - å¦‚æœå¾…åˆ›å»ºå¸æˆ·çš„æƒé™ç­‰çº§å¤§äºç­‰äºå½“å‰å¸æˆ·æƒé™ç­‰çº§åˆ™æ“ä½œå¤±è´¥ï¼›
    - å¦‚æœ `[UserID]` ä¸å·²æ³¨å†Œå¸æˆ·é‡å¤åˆ™æ“ä½œå¤±è´¥ã€‚
- **åˆ é™¤å¸æˆ·**
  - {7} `delete [UserID]`
  - åˆ é™¤æŒ‡å®šå¸æˆ·ã€‚
    - å¦‚æœå¾…åˆ é™¤å¸æˆ·ä¸å­˜åœ¨åˆ™æ“ä½œå¤±è´¥ï¼›
    - å¦‚æœå¾…åˆ é™¤å¸æˆ·å·²ç™»å½•åˆ™æ“ä½œå¤±è´¥ã€‚

### å›¾ä¹¦ç³»ç»Ÿ

å›¾ä¹¦ç³»ç»Ÿæä¾›å›¾ä¹¦ä¿¡æ¯ã€åº“å­˜ä¿¡æ¯å’Œå›¾ä¹¦äº¤æ˜“è´¢åŠ¡è®°å½•çš„ç›¸å…³æœåŠ¡åŠæ•°æ®å­˜å‚¨åŠŸèƒ½ã€‚

#### å›¾ä¹¦ä¿¡æ¯

- `[ISBN]`ï¼šInternal Strange Book Numberï¼›
  - åˆæ³•å­—ç¬¦é›†ï¼šé™¤ä¸å¯è§å­—ç¬¦ä»¥å¤– ASCII å­—ç¬¦ï¼›
  - æœ€å¤§é•¿åº¦ï¼š20ï¼›
  - **ç‰¹æ®Šè¯´æ˜ï¼š** æœ¬ç³»ç»Ÿä¸­ä»»ä½•ä¸¤æœ¬å›¾ä¹¦ä¸åº”æœ‰ç›¸åŒ `[ISBN]` ä¿¡æ¯ã€‚
- `[BookName]`, `[Author]`ï¼šå›¾ä¹¦åå­—ï¼Œå›¾ä¹¦ä½œè€…åå­—ï¼›
  - åˆæ³•å­—ç¬¦é›†ï¼šé™¤ä¸å¯è§å­—ç¬¦å’Œè‹±æ–‡åŒå¼•å·ä»¥å¤– ASCII å­—ç¬¦ï¼›
  - æœ€å¤§é•¿åº¦ï¼š60ã€‚
- `[Keyword]`ï¼šå›¾ä¹¦å…³é”®è¯ï¼›
  - åˆæ³•å­—ç¬¦é›†ï¼šé™¤ä¸å¯è§å­—ç¬¦å’Œè‹±æ–‡åŒå¼•å·ä»¥å¤– ASCII å­—ç¬¦ï¼›
  - æœ€å¤§é•¿åº¦ï¼š60ï¼›
  - **ç‰¹æ®Šè¯´æ˜**ï¼š`[keyword]` å†…å®¹ä»¥ `|` ä¸ºåˆ†éš”å¯ä»¥å‡ºç°å¤šæ®µä¿¡æ¯ã€‚å¦‚ `math|magic|quantum` è¡¨ç¤ºè¯¥å›¾ä¹¦å…·æœ‰ä¸‰ä¸ªæ— é¡ºåºçš„å…³é”®è¯ `math`, `magic` å’Œ `quantum`ï¼Œæ¯æ®µä¿¡æ¯é•¿åº¦è‡³å°‘ä¸º 1ã€‚
- `[Quantity]`ï¼šè´­ä¹°æ•°é‡ï¼›
  - åˆæ³•å­—ç¬¦é›†ï¼šæ•°å­—ï¼›
  - æœ€å¤§é•¿åº¦ï¼š10ï¼›
  - ç‰¹æ®Šè¯´æ˜ï¼šæ•°å€¼ä¸è¶…è¿‡ 2'147'483'647ã€‚
- `[Price]`, `[TotalCost]`ï¼šå›¾ä¹¦å•ä»·ï¼Œäº¤æ˜“æ€»é¢ã€‚
  - åˆæ³•å­—ç¬¦é›†ï¼šæ•°å­—å’Œ `.`ï¼›
  - æœ€å¤§é•¿åº¦ï¼š13ï¼›
  - ç‰¹æ®Šè¯´æ˜ï¼šæœ¬ç³»ç»Ÿä¸­æµ®ç‚¹æ•°è¾“å‡ºç²¾åº¦å›ºå®šä¸ºå°æ•°ç‚¹åä¸¤ä½ã€‚

å­—ç¬¦ç›¸å…³ä¿¡æ¯é»˜è®¤å€¼ä¸ºç©ºï¼Œæ•°å­—ç›¸å…³ä¿¡æ¯é»˜è®¤å€¼ä¸ºæ•°å€¼ 0ã€‚

#### å›¾ä¹¦ç›¸å…³æŒ‡ä»¤

- **æ£€ç´¢å›¾ä¹¦**
  
  - {1} `show (-ISBN=[ISBN] | -name="[BookName]" | -author="[Author]" | -keyword="[Keyword]")?`
  - ä»¥ `[ISBN]` å­—å…¸å‡åºä¾æ¬¡è¾“å‡ºæ»¡è¶³è¦æ±‚çš„å›¾ä¹¦ä¿¡æ¯ï¼Œæ¯ä¸ªå›¾ä¹¦ä¿¡æ¯è¾“å‡ºæ ¼å¼ä¸º `[ISBN]\t[BookName]\t[Author]\t[Keyword]\t[Price]\t[åº“å­˜æ•°é‡]\n`ï¼Œå…¶ä¸­ `[Keyword]` ä¸­å…³é”®è¯é¡ºåºä¸ºè¾“å…¥æ—¶çš„é¡ºåºã€‚
    - Aæ— æ»¡è¶³è¦æ±‚çš„å›¾ä¹¦æ—¶è¾“å‡ºç©ºè¡Œï¼›
    - æ— é™„åŠ å‚æ•°æ—¶ï¼Œæ‰€æœ‰å›¾ä¹¦å‡æ»¡è¶³è¦æ±‚ï¼›
    - é™„åŠ å‚æ•°å†…å®¹ä¸ºç©ºåˆ™æ“ä½œå¤±è´¥ï¼›
    - `[Keyword]` ä¸­å‡ºç°å¤šä¸ªå…³é”®è¯åˆ™æ“ä½œå¤±è´¥ã€‚
  
- **è´­ä¹°å›¾ä¹¦**
  - {1} `buy [ISBN] [Quantity]`
  - è´­ä¹°æŒ‡å®šæ•°é‡çš„æŒ‡å®šå›¾ä¹¦ï¼ˆç”±äºæœ¬ç³»ç»Ÿä¸åŒ…æ‹¬æ”¯ä»˜ç³»ç»Ÿï¼Œæ•…ä»…éœ€å‡å°‘åº“å­˜ï¼‰ï¼Œä»¥æµ®ç‚¹æ•°è¾“å‡ºè´­ä¹°å›¾ä¹¦æ‰€éœ€çš„æ€»é‡‘é¢ã€‚
    - æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å›¾ä¹¦åˆ™æ“ä½œå¤±è´¥ï¼›
    - è´­ä¹°æ•°é‡ä¸ºéæ­£æ•´æ•°åˆ™æ“ä½œå¤±è´¥ã€‚

- **é€‰æ‹©å›¾ä¹¦**
  - {3} `select [ISBN]`
  - ä»¥**å½“å‰å¸æˆ·**é€‰ä¸­æŒ‡å®šå›¾ä¹¦ï¼ˆå¸æˆ·ç™»å‡ºåæ— éœ€ä¿å­˜é€‰ä¸­å›¾ä¹¦æƒ…å†µï¼‰ã€‚
    - æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å›¾ä¹¦åˆ™åˆ›å»ºä»…æ‹¥æœ‰ `[ISBN]` ä¿¡æ¯çš„æ–°å›¾ä¹¦ï¼›
    - é€€å‡ºç³»ç»Ÿè§†ä¸ºå–æ¶ˆé€‰ä¸­å›¾ä¹¦ã€‚

- **ä¿®æ”¹å›¾ä¹¦ä¿¡æ¯**
  - {3} `modify (-ISBN=[ISBN] | -name="[BookName]" | -author="[Author]" | -keyword="[Keyword]" | -price=[Price])+`
  - ä»¥æŒ‡ä»¤ä¸­çš„ä¿¡æ¯æ›´æ–°é€‰ä¸­å›¾ä¹¦çš„ä¿¡æ¯ã€‚
    - å¦‚æœªé€‰ä¸­å›¾ä¹¦åˆ™æ“ä½œå¤±è´¥ï¼›
    - æœ‰é‡å¤é™„åŠ å‚æ•°ä¸ºéæ³•æŒ‡ä»¤ï¼›
    - é™„åŠ å‚æ•°å†…å®¹ä¸ºç©ºåˆ™æ“ä½œå¤±è´¥ï¼›
    - ä¸å…è®¸å°† ISBN æ”¹ä¸ºåŸæœ‰çš„ ISBNï¼Œä¾‹å¦‚ï¼š

      ```
      select example
      modify -ISBN=example
      ```

      ä¸ºéæ³•æ“ä½œï¼›
    - `[keyword]` åŒ…å«é‡å¤ä¿¡æ¯æ®µåˆ™æ“ä½œå¤±è´¥ã€‚

- **å›¾ä¹¦è¿›è´§**
  - {3} `import [Quantity] [TotalCost]`
  - ä»¥æŒ‡å®šäº¤æ˜“æ€»é¢è´­å…¥æŒ‡å®šæ•°é‡çš„é€‰ä¸­å›¾ä¹¦ï¼Œå¢åŠ å…¶åº“å­˜æ•°ã€‚
    - å¦‚æœªé€‰ä¸­å›¾ä¹¦åˆ™æ“ä½œå¤±è´¥ï¼›
    - è´­å…¥æ•°é‡ä¸ºéæ­£æ•´æ•°åˆ™æ“ä½œå¤±è´¥ï¼›
    - äº¤æ˜“æ€»é¢ä¸ºéæ­£æ•°åˆ™æ“ä½œå¤±è´¥ã€‚

### æ—¥å¿—ç³»ç»Ÿ

æ—¥å¿—ç³»ç»Ÿè´Ÿè´£è®°å½•ä¹¦åº—ç®¡ç†ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹ä¸­çš„å„ç§æ•°æ®ï¼Œæä¾›å„ç±»æ—¥å¿—ä¿¡æ¯æŸ¥è¯¢æœåŠ¡

#### æ—¥å¿—ä¿¡æ¯

- `[Count]`ï¼šäº¤æ˜“ç¬”æ•°
  - åˆæ³•å­—ç¬¦é›†ï¼šæ•°å­—ï¼›
  - æœ€å¤§é•¿åº¦ï¼š10ï¼›
  - ç‰¹æ®Šè¯´æ˜ï¼šæ•°å€¼ä¸è¶…è¿‡ 2'147'483'647ã€‚

#### æ—¥å¿—ç›¸å…³æŒ‡ä»¤

- **è´¢åŠ¡è®°å½•æŸ¥è¯¢**
  - {7} `show finance ([Count])?`
  - è¾“å‡ºæœ€åå®Œæˆçš„æŒ‡å®šç¬”æ•°äº¤æ˜“æ€»é¢ï¼Œæ ¼å¼ä¸º `+ [æ”¶å…¥] - [æ”¯å‡º]\n`ï¼Œä¾‹å¦‚ `+ 1.23 - 45678.90`ã€‚
    - æ—  `Count` å‚æ•°æ—¶ï¼Œè¾“å‡ºæ‰€æœ‰äº¤æ˜“ä¹‹æ€»é¢ï¼›
      - ä¸å­˜åœ¨äº¤æ˜“æ—¶è®¤ä¸ºæ”¶å…¥æ”¯å‡ºå‡ä¸º 0.00ã€‚
    - `Count` ä¸º 0 æ—¶è¾“å‡ºç©ºè¡Œï¼›
    - `Count` å¤§äºå†å²äº¤æ˜“æ€»ç¬”æ•°æ—¶æ“ä½œå¤±è´¥ã€‚

- **ç”Ÿæˆè´¢åŠ¡è®°å½•æŠ¥å‘ŠæŒ‡ä»¤**
      - {7} `report finance` ğŸ—ï¸
          - ç”Ÿæˆä¸€å¼ èµå¿ƒæ‚¦ç›®çš„è´¢åŠ¡æŠ¥è¡¨ï¼Œæ ¼å¼è‡ªå®š

  - **ç”Ÿæˆå…¨ä½“å‘˜å·¥å·¥ä½œæƒ…å†µæŠ¥å‘ŠæŒ‡ä»¤**
    - {7} `report employee` ğŸ—ï¸
    - ç”Ÿæˆä¸€å¼ èµå¿ƒæ‚¦ç›®çš„å‘˜å·¥å·¥ä½œæƒ…å†µè¡¨ï¼Œè®°å½•å…¶æ“ä½œï¼Œæ ¼å¼è‡ªå®š
- **ç”Ÿæˆæ—¥å¿—**
  - {7} `log`ğŸ—ï¸
  - è¿”å›æ—¥å¿—è®°å½•ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæ“ä½œç±»çš„è°å¹²äº†ä»€ä¹ˆï¼Œä»¥åŠè´¢åŠ¡ä¸Šæ¯ä¸€ç¬”äº¤æ˜“æƒ…å†µï¼Œæ ¼å¼è‡ªå®šã€‚

- **æ³¨æ„**ï¼šå¸¦æœ‰ ğŸ—ï¸ æ ‡è®°çš„æŒ‡ä»¤ä¸ä¼šå‡ºç°åœ¨æµ‹è¯•æ•°æ®ä¸­ï¼Œä½†éœ€è¦å®ç°å¹¶æ‰‹åŠ¨å‘åŠ©æ•™å±•ç¤ºã€‚

### æ€§èƒ½éœ€æ±‚

è€ƒè™‘åˆ°åº”ç”¨åœºæ™¯ä¸‹å¸æˆ·å’Œå›¾ä¹¦æ•°é‡è¾ƒå¤§ï¼Œæ•…**ç¦æ­¢å°†ä¸»ä½“æ•°æ®å­˜å‚¨äºå†…å­˜**ï¼Œåº”å®æ—¶è¯»å†™æ–‡ä»¶æ•°æ®ã€‚è¿è¡Œè¿‡ç¨‹ä¸­ç¨‹åºåˆ›å»ºçš„æ–‡ä»¶æ•°é‡ä¸å¾—è¶…è¿‡ 20 ä¸ªã€‚

ç¦æ­¢ç±»ä¼¼ filesystem as database çš„å®ç°æ–¹å¼ã€‚*ï¼ˆå¦‚æœä½ ä¸çŸ¥é“è¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Œé‚£ä¹ˆä¹Ÿä¸ç”¨æ‹…å¿ƒè‡ªå·±ä¼šè§¦çŠ¯è¯¥æ¡è¦æ±‚ã€‚ï¼‰*

## ä¹¦åº—ç®¡ç†ç³»ç»Ÿæ€»ä½“è®¾è®¡æ–‡æ¡£

### é¡¹ç›®åç§°

ä¹¦åº—ç®¡ç†ç³»ç»Ÿ

### æ–‡æ¡£ä½œè€…

Bonan Jin

### ç¨‹åºåŠŸèƒ½æ¦‚è¿°

ä¸€ä¸ªåŸºäºå‘½ä»¤è¡Œäº¤äº’çš„ä¹¦åº—ç®¡ç†ç³»ç»Ÿï¼Œæœ‰é¡¾å®¢ã€é”€å”®äººå‘˜å’Œåº—é•¿ä¸‰ç±»è§’è‰²ï¼Œé€šè¿‡æƒé™åˆ†çº§å®ç°å·®å¼‚åŒ–åŠŸèƒ½è®¿é—®ã€‚æ‰€æœ‰ä¸»ä½“æ•°æ®å®æ—¶å­˜å‚¨äºå¤–å­˜æ–‡ä»¶ï¼Œæ”¯æŒåµŒå¥—ç™»å½•ï¼ˆå¤šè´¦æˆ·åŒæ—¶ç™»å½•ï¼ŒæŒ‡ä»¤é»˜è®¤ç”±æœ€åç™»å½•è´¦æˆ·æ‰§è¡Œï¼‰ã€‚æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š

- ç”¨æˆ·ç®¡ç†ï¼šæ³¨å†Œã€ç™»å½•/ç™»å‡ºã€æƒé™æ§åˆ¶ã€è´¦æˆ·åˆ›å»ºä¸åˆ é™¤ã€å¯†ç ä¿®æ”¹
- å›¾ä¹¦ç®¡ç†ï¼šæŸ¥è¯¢ï¼ˆå¤šæ¡ä»¶ç­›é€‰ï¼‰ã€è´­ä¹°ã€å½•å…¥ã€ä¿¡æ¯ä¿®æ”¹ã€è¿›è´§
- äº¤æ˜“ç®¡ç†ï¼šé”€å”®è®°å½•ã€é‡‡è´­è®°å½•ã€ç›ˆåˆ©ç»Ÿè®¡ä¸è´¢åŠ¡æŠ¥è¡¨ç”Ÿæˆ
- æ—¥å¿—ç®¡ç†ï¼šæ“ä½œæ—¥å¿—è®°å½•ã€è´¢åŠ¡æ—¥å¿—æŸ¥è¯¢ã€å‘˜å·¥å·¥ä½œæŠ¥å‘Šç”Ÿæˆ

ç³»ç»Ÿé¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨å®Œæˆåˆå§‹åŒ–ï¼Œåˆ›å»ºåº—ä¸»è´¦æˆ·ï¼ˆrootï¼Œå¯†ç ï¼Œæƒé™{7}ï¼‰ï¼Œé€šè¿‡å‘½ä»¤è¡ŒæŒ‡ä»¤æ¥æ”¶æ“ä½œï¼Œç›´è‡³è¯»å…¥EOFæˆ–`quit`/`exit`æŒ‡ä»¤ç»ˆæ­¢ã€‚

### ä¸»ä½“é€»è¾‘è¯´æ˜

1. **åˆå§‹åŒ–é˜¶æ®µ**ï¼š
   - ç¨‹åºå¯åŠ¨æ—¶æ£€æŸ¥æ ¸å¿ƒæ•°æ®æ–‡ä»¶ï¼ˆç”¨æˆ·ã€å›¾ä¹¦ã€äº¤æ˜“ã€æ—¥å¿—ï¼‰æ˜¯å¦å­˜åœ¨
   - é¦–æ¬¡è¿è¡Œæ—¶åˆ›å»ºåˆå§‹æ–‡ä»¶åŠrootè´¦æˆ·ï¼Œéé¦–æ¬¡è¿è¡Œåˆ™åŠ è½½ç°æœ‰æ–‡ä»¶ç»“æ„
   - åˆå§‹åŒ–ç™»å½•æ ˆï¼ˆæ”¯æŒåµŒå¥—ç™»å½•ï¼‰åŠå½“å‰é€‰ä¸­å›¾ä¹¦çŠ¶æ€

2. **å‘½ä»¤å¤„ç†é˜¶æ®µ**ï¼š
   - è¯»å–ç”¨æˆ·è¾“å…¥æŒ‡ä»¤ï¼Œå»é™¤å†—ä½™ç©ºæ ¼åè¿›è¡Œè§£æ
   - éªŒè¯æŒ‡ä»¤æ ¼å¼æ˜¯å¦åˆæ³•ï¼ˆå…³é”®è¯ã€å‚æ•°ä¸ªæ•°åŠæ ¼å¼ï¼‰
   - æ ¹æ®å½“å‰ç™»å½•è´¦æˆ·æƒé™ï¼ˆæœªç™»å½•ä¸º{0}ï¼‰åˆ¤æ–­æ“ä½œæƒé™
   - è°ƒç”¨å¯¹åº”æ¨¡å—å¤„ç†é€»è¾‘ï¼ˆå¦‚ç”¨æˆ·æ“ä½œè°ƒç”¨UserManagerï¼‰
   - è¯»å†™æ–‡ä»¶å®Œæˆæ•°æ®æ›´æ–°
   - è¾“å‡ºå¤„ç†ç»“æœï¼ˆæˆåŠŸä¿¡æ¯/åˆ—è¡¨ï¼‰æˆ–`Invalid\n`ï¼ˆå¤±è´¥æ—¶ï¼‰

3. **ç»ˆæ­¢é˜¶æ®µ**ï¼š
   - æ¥æ”¶`quit`/`exit`æŒ‡ä»¤æˆ–EOFæ—¶ï¼Œç¡®ä¿æ‰€æœ‰æœªå®Œæˆå†™æ“ä½œæäº¤è‡³æ–‡ä»¶
   - é‡Šæ”¾èµ„æºå¹¶æ­£å¸¸é€€å‡ºç¨‹åº

### ä»£ç æ–‡ä»¶ç»“æ„

```
main.cpp                  // ç¨‹åºå…¥å£ï¼Œè´Ÿè´£åˆå§‹åŒ–ã€å‘½ä»¤å¾ªç¯ä¸èµ„æºé‡Šæ”¾
â”œâ”€ include/
â”‚  â”œâ”€ User.h              // Userç±»åŠUserManagerç±»å£°æ˜ï¼ˆç”¨æˆ·ç®¡ç†ï¼‰ï¼ˆæ³¨å†Œã€ç™»å½•ã€æƒé™æ§åˆ¶ç­‰ï¼‰
â”‚  â”œâ”€ Book.h              // Bookç±»åŠBookManagerç±»å£°æ˜ï¼ˆå›¾ä¹¦ç®¡ç†ï¼‰ï¼ˆæŸ¥è¯¢ã€ä¿®æ”¹ã€åº“å­˜æ“ä½œç­‰ï¼‰
â”‚  â”œâ”€ Transaction.h       // Transactionç±»ï¼ˆäº¤æ˜“ç®¡ç†ï¼‰ï¼ˆé”€å”®ã€é‡‡è´­ã€ç›ˆåˆ©è®¡ç®—ç­‰ï¼‰
â”‚  â”œâ”€ Log.h               // Logç±»åŠLogManagerç±»å£°æ˜ï¼ˆæ—¥å¿—ç®¡ç†ï¼‰(æ—¥å¿—è®°å½•ä¸æŸ¥è¯¢å®ç°)
â”‚  â”œâ”€ Parser.h            // Parserç±»å£°æ˜ï¼ˆå‘½ä»¤è§£æï¼‰
â”‚  â”œâ”€ Storage.h           // æ•°æ®å­˜å‚¨æ¥å£å£°æ˜
â”‚  â””â”€ Utils.h             // å·¥å…·å‡½æ•°å£°æ˜ï¼ˆæ—¶é—´ã€æ–‡ä»¶IOã€æƒé™ï¼‰
â””â”€ src/
   â”œâ”€ User.cpp
   â”œâ”€ Book.cpp
   â”œâ”€ Transaction.cpp
   â”œâ”€ Log.cpp
   â”œâ”€ Parser.cpp
   â”œâ”€ Storage.cpp 
   â””â”€ Utils.cpp
```

**mainå‡½æ•°ä¸ç±»çš„å…³ç³»**ï¼š

- mainå‡½æ•°åˆå§‹åŒ–å„ç®¡ç†å™¨å®ä¾‹ï¼ˆUserManagerã€BookManagerç­‰ï¼‰åŠå‘½ä»¤è§£æå™¨
- é€šè¿‡CommandParseræŒç»­è¯»å–å¹¶è§£ææŒ‡ä»¤ï¼Œæ ¹æ®æŒ‡ä»¤ç±»å‹åˆ†å‘è‡³å¯¹åº”ç®¡ç†å™¨
- å„ç®¡ç†å™¨ç‹¬ç«‹è´Ÿè´£æœ¬æ¨¡å—çš„ä¸šåŠ¡é€»è¾‘ï¼Œé€šè¿‡utilsæ¨¡å—å®ç°æ–‡ä»¶IOæ“ä½œ
- ç™»å½•çŠ¶æ€é€šè¿‡UserManagerçš„ç™»å½•æ ˆç»´æŠ¤ï¼Œå½“å‰æ“ä½œæƒé™ç”±æ ˆé¡¶ç”¨æˆ·å†³å®š

### åŠŸèƒ½è®¾è®¡

#### æ¨¡å—åŠŸèƒ½æ¦‚è¿°

1. **ç”¨æˆ·ç®¡ç†æ¨¡å—**
   - æ ¸å¿ƒåŠŸèƒ½ï¼šè´¦æˆ·æ³¨å†Œï¼ˆ{0}åŠä»¥ä¸Šï¼‰ã€ç™»å½•/ç™»å‡ºï¼ˆ{0}åŠä»¥ä¸Šï¼‰ã€å¯†ç ä¿®æ”¹ï¼ˆæƒé™éªŒè¯ï¼‰ã€è´¦æˆ·åˆ›å»ºï¼ˆ{3}åŠä»¥ä¸Šå¯åˆ›å»º{1}ï¼Œ{7}å¯åˆ›å»º{3}ï¼‰ã€è´¦æˆ·åˆ é™¤ï¼ˆ{7}ä¸“å±ï¼‰
   - æƒé™æ§åˆ¶ï¼š{0}âŠ‚{1}âŠ‚{3}âŠ‚{7}çš„å­é›†å…³ç³»

2. **å›¾ä¹¦ç®¡ç†æ¨¡å—**
   - æ ¸å¿ƒåŠŸèƒ½ï¼šå›¾ä¹¦æŸ¥è¯¢ï¼ˆ{1}åŠä»¥ä¸Šï¼Œå¤šæ¡ä»¶ç­›é€‰ï¼‰ã€è´­ä¹°ï¼ˆ{1}åŠä»¥ä¸Šï¼Œæ‰£å‡åº“å­˜ï¼‰ã€é€‰ä¸­å›¾ä¹¦ï¼ˆ{3}åŠä»¥ä¸Šï¼Œæ”¯æŒåˆ›å»ºæ–°å›¾ä¹¦éª¨æ¶ï¼‰ã€ä¿®æ”¹ä¿¡æ¯ï¼ˆ{3}åŠä»¥ä¸Šï¼ŒåŸºäºé€‰ä¸­çŠ¶æ€ï¼‰ã€è¿›è´§ï¼ˆ{3}åŠä»¥ä¸Šï¼Œå¢åŠ åº“å­˜ï¼‰
   - æ•°æ®çº¦æŸï¼šISBNå”¯ä¸€ï¼Œå…³é”®è¯ä»¥`|`åˆ†éš”ä¸”æ— é‡å¤ï¼Œæ•°å€¼å‹å‚æ•°ç¬¦åˆèŒƒå›´é™åˆ¶

3. **äº¤æ˜“ç®¡ç†æ¨¡å—**
   - æ ¸å¿ƒåŠŸèƒ½ï¼šé”€å”®è®°å½•ç”Ÿæˆï¼ˆè´­ä¹°æ—¶è‡ªåŠ¨åˆ›å»ºï¼‰ã€é‡‡è´­è®°å½•ç”Ÿæˆï¼ˆè¿›è´§æ—¶è‡ªåŠ¨åˆ›å»ºï¼‰ã€è´¢åŠ¡æŸ¥è¯¢ï¼ˆ{7}ä¸“å±ï¼Œæ”¯æŒæŒ‡å®šæ¡æ•°æˆ–å…¨é‡ï¼‰ã€ç›ˆåˆ©è®¡ç®—ï¼ˆæ”¶å…¥-æ”¯å‡ºï¼‰
   - å…³è”å…³ç³»ï¼šäº¤æ˜“è®°å½•ä¸æ“ä½œäººã€å›¾ä¹¦ISBNå…³è”ï¼Œæ”¯æŒæ—¶é—´èŒƒå›´ç­›é€‰

4. **æ—¥å¿—ç®¡ç†æ¨¡å—**
   - æ ¸å¿ƒåŠŸèƒ½ï¼šæ“ä½œæ—¥å¿—è®°å½•ï¼ˆæ‰€æœ‰æ“ä½œè‡ªåŠ¨ç”Ÿæˆï¼‰ã€è´¢åŠ¡æ—¥å¿—æŸ¥è¯¢ï¼ˆ{7}ä¸“å±ï¼‰ã€å‘˜å·¥å·¥ä½œæŠ¥å‘Šï¼ˆ{7}ä¸“å±ï¼ŒæŒ‰ç”¨æˆ·ç­›é€‰ï¼‰ã€ç³»ç»Ÿæ—¥å¿—å¯¼å‡ºï¼ˆ{7}ä¸“å±ï¼‰
   - æ—¥å¿—å†…å®¹ï¼šåŒ…å«æ—¶é—´æˆ³ã€æ“ä½œäººã€æ“ä½œç±»å‹åŠè¯¦æƒ…ï¼Œæ”¯æŒæŒ‰æ—¶é—´èŒƒå›´

#### åŠŸèƒ½ç»“æ„å›¾

```mermaid
flowchart TB
    subgraph è¾“å…¥å±‚
        A[å‘½ä»¤è¡Œè¾“å…¥] --> B[å‘½ä»¤è§£æå™¨]
    end
    subgraph æ ¸å¿ƒæ¨¡å—
        B --> C[ç”¨æˆ·ç®¡ç†æ¨¡å—]
        B --> D[å›¾ä¹¦ç®¡ç†æ¨¡å—]
        B --> E[äº¤æ˜“ç®¡ç†æ¨¡å—]
        B --> F[æ—¥å¿—ç®¡ç†æ¨¡å—]
        C --> G{æƒé™éªŒè¯}
        G -->|é€šè¿‡| D & E & F
        G -->|æ‹’ç»| H[è¾“å‡ºInvalid]
    end
    subgraph æ•°æ®å±‚
        C --> I[(ç”¨æˆ·æ•°æ®æ–‡ä»¶ users.dat)]
        D --> J[(å›¾ä¹¦æ•°æ®æ–‡ä»¶ books.dat)]
        E --> K[(äº¤æ˜“è®°å½•æ–‡ä»¶ transactions.dat)]
        F --> L[(æ—¥å¿—æ–‡ä»¶ logs.dat)]
    end
    subgraph è¾“å‡ºå±‚
        D --> M[ç»“æœè¾“å‡º]
        E --> M
        F --> M
        H --> M
    end
```

### æ•°æ®åº“è®¾è®¡

#### å­˜å‚¨æ•°æ®é¡¹

1. **ç”¨æˆ·æ•°æ®ï¼ˆusers.datï¼‰**
   - å­˜å‚¨å†…å®¹ï¼šUserIDï¼ˆç”¨æˆ·åï¼‰ã€Passwordï¼ˆå¯†ç ï¼‰ã€Privilegeï¼ˆæƒé™ç­‰çº§ï¼‰ã€Usernameï¼ˆæ˜¾ç¤ºåï¼‰
   - æ ¼å¼ï¼š`UserID\tPassword\tPrivilege\tUsername\n`
   - çº¦æŸï¼šUserIDå”¯ä¸€ï¼ŒPrivilegeåªèƒ½ä¸º1/3/7

2. **å›¾ä¹¦æ•°æ®ï¼ˆbooks.datï¼‰**
   - å­˜å‚¨å†…å®¹ï¼šISBNã€BookNameã€Authorã€Keywordã€Priceã€Quantityï¼ˆåº“å­˜ï¼‰
   - æ ¼å¼ï¼š`ISBN\tBookName\tAuthor\tKeyword\tPrice\tQuantity\n`
   - çº¦æŸï¼šISBNå”¯ä¸€ï¼ŒKeywordæ— é‡å¤æ®µï¼ŒPriceä¿ç•™2ä½å°æ•°ï¼ŒQuantityâ‰¥0

3. **äº¤æ˜“è®°å½•ï¼ˆtransactions.datï¼‰**
   - å­˜å‚¨å†…å®¹ï¼šTimeï¼ˆæ—¶é—´æˆ³ï¼‰ã€Typeï¼ˆäº¤æ˜“ç±»å‹ï¼šbuy/importï¼‰ã€ISBNã€Quantityã€Amountï¼ˆé‡‘é¢ï¼‰ã€Operatorï¼ˆæ“ä½œäººIDï¼‰
   - æ ¼å¼ï¼š`Time\tType\tISBN\tQuantity\tAmount\tOperator\n`
   - çº¦æŸï¼šAmountä¿ç•™2ä½å°æ•°ï¼ˆbuyä¸ºæ­£ï¼Œimportä¸ºè´Ÿï¼‰ï¼ŒQuantity>0

4. **æ—¥å¿—æ•°æ®ï¼ˆlogs.datï¼‰**
   - å­˜å‚¨å†…å®¹ï¼šTimeï¼ˆæ—¶é—´æˆ³ï¼‰ã€Operatorï¼ˆæ“ä½œäººIDï¼‰ã€Operationï¼ˆæ“ä½œç±»å‹ï¼‰ã€Detailsï¼ˆè¯¦æƒ…ï¼‰
   - æ ¼å¼ï¼š`Time\tOperator\tOperation\tDetails\n`
   - ç¤ºä¾‹ï¼š`2025-12-01 10:00:00\troot\tcreate_user\tuser1 123 1 User1`

#### å­˜å‚¨çº¦æŸ

- æ€»æ–‡ä»¶æ•°â‰¤20
- æ‰€æœ‰æ•°æ®å®æ—¶å†™å…¥å¤–å­˜ï¼Œæ“ä½œè¿‡ç¨‹ä¸­ä¸ç¼“å­˜å…¨é‡æ•°æ®
- é‡‡ç”¨åˆ¶è¡¨ç¬¦ï¼ˆ\tï¼‰åˆ†éš”å­—æ®µï¼Œæ¢è¡Œç¬¦ï¼ˆ\nï¼‰åˆ†éš”è®°å½•ï¼Œæ”¯æŒé€è¡Œè¯»å†™
- æ•°å€¼å‹æ•°æ®ï¼ˆä»·æ ¼ã€æ•°é‡ç­‰ï¼‰ä¸¥æ ¼æ ¡éªŒæ ¼å¼

### ç±»ã€ç»“æ„ä½“è®¾è®¡

1. **Userç±»**

   ```cpp
   class User {
   private:
       std::string user_id;       // ç™»å½•IDï¼ˆå”¯ä¸€ï¼‰
       std::string password;      // å¯†ç 
       int privilege;             // æƒé™ç­‰çº§ï¼ˆ1/3/7ï¼‰
       std::string username;      // ç”¨æˆ·å
   public:
       User() = default;
       User(const std::string& id, const std::string& pwd, int priv, const std::string& name);
       std::string get_user_id() const;
       std::string get_username() const;
       int get_privilege() const;
       bool verify_password(const std::string& input) const;  // å¯†ç éªŒè¯
       bool has_privilege(int required) const;                // æƒé™æ£€æŸ¥ï¼ˆâ‰¥requiredï¼‰
       void set_password(const std::string& new_pwd);         // ä¿®æ”¹å¯†ç 
   };
   ```

2. **Bookç±»**

   ```cpp
   class Book {
   private:
       std::string isbn;          // å”¯ä¸€æ ‡è¯†
       std::string name;          // ä¹¦å
       std::string author;        // ä½œè€…
       std::string keyword;       // å…³é”®è¯ï¼ˆ|åˆ†éš”ï¼Œæ— é‡å¤ï¼‰
       double price;              // å•ä»·ï¼ˆä¿ç•™2ä½å°æ•°ï¼‰
       int quantity;              // åº“å­˜æ•°é‡ï¼ˆâ‰¥0ï¼‰
   public:
       Book() = default;
       Book(const std::string& isbn);  // ä»…åˆå§‹åŒ–ISBNï¼ˆç”¨äºselectåˆ›å»ºï¼‰
       Book(const std::string& isbn, const std::string& name, const std::string& author, 
            const std::string& keyword, double price, int quantity);
       // get
       std::string get_isbn() const;
       std::string get_name() const;
       int get_quantity() const;
       double get_price() const;
       // åº“å­˜æ“ä½œ
       bool increase_quantity(int num);  // è¿›è´§
       bool decrease_quantity(int num);  // è´­ä¹°
       // ä¿®æ”¹å±æ€§ï¼ˆè¿”å›æ˜¯å¦æˆåŠŸï¼‰
       bool set_name(const std::string& new_name);
       bool set_author(const std::string& new_author);
       bool set_keyword(const std::string& new_keyword);
       bool set_price(double new_price);
       bool set_isbn(const std::string& new_isbn);
       // åŒ¹é…æŸ¥è¯¢æ¡ä»¶
       bool match(const std::string& type, const std::string& value) const;
   };
   ```

3. **Transactionç»“æ„ä½“**

   ```cpp
   struct Transaction {
       std::string time;          // æ—¶é—´æˆ³ï¼ˆYYYY-MM-DD HH:MM:SSï¼‰
       std::string type;          // "buy"æˆ–"import"
       std::string isbn;
       int quantity;              // äº¤æ˜“æ•°é‡ï¼ˆ>0ï¼‰
       double amount;             // é‡‘é¢ï¼ˆbuyä¸ºæ­£ï¼Œimportä¸ºè´Ÿï¼‰
       std::string operator_id;   // æ“ä½œäººID

       Transaction() = default;
       Transaction(const std::string& t, const std::string& typ, const std::string& isbn,
                   int qty, double amt, const std::string& op);
       std::string to_string() const;  // è½¬æ¢ä¸ºå­˜å‚¨æ ¼å¼å­—ç¬¦ä¸²
   };
   ```

4. **Logç»“æ„ä½“**

   ```cpp
   struct Log {
       std::string time;          // æ—¶é—´æˆ³
       std::string operator_id;   // æ“ä½œäººIDï¼ˆæœªç™»å½•ä¸º"guest"ï¼‰
       std::string operation;     // æ“ä½œç±»å‹ï¼ˆå¦‚"login"ã€"buy"ç­‰ï¼‰
       std::string details;       // æ“ä½œè¯¦æƒ…

       Log() = default;
       Log(const std::string& t, const std::string& op_id, const std::string& op, const std::string& det);
       std::string to_string() const;  // è½¬æ¢ä¸ºå­˜å‚¨æ ¼å¼å­—ç¬¦ä¸²
   };
   ```

5. **ç®¡ç†å™¨ç±»ï¼ˆç¤ºä¾‹ï¼šUserManagerï¼‰**

   ```cpp
   class UserManager {
   private:
       std::string file_path;                 // æ•°æ®æ–‡ä»¶è·¯å¾„
       std::stack<User> login_stack;          // åµŒå¥—ç™»å½•æ ˆ
       bool load_user(const std::string& user_id, User& user);  // ä»æ–‡ä»¶åŠ è½½å•ä¸ªç”¨æˆ·
       bool save_user(const User& user);      // ä¿å­˜ç”¨æˆ·åˆ°æ–‡ä»¶
       bool delete_user_file(const std::string& user_id);  // ä»æ–‡ä»¶åˆ é™¤ç”¨æˆ·
   public:
       UserManager(const std::string& path);
       bool init_root();                      // åˆå§‹åŒ–rootç”¨æˆ·ï¼ˆé¦–æ¬¡è¿è¡Œï¼‰
       bool register_user(const std::string& user_id, const std::string& pwd, const std::string& name);  // {0}å¯è°ƒç”¨
       bool login(const std::string& user_id, const std::string& pwd);
       bool logout();
       bool create_user(const std::string& user_id, const std::string& pwd, 
           int priv, const std::string& name, int current_priv);  // æƒé™æ£€æŸ¥
       bool delete_user(const std::string& user_id, int current_priv);  // æƒé™æ£€æŸ¥
       bool change_password(const std::string& user_id, const std::string& old_pwd, const std::string& new_pwd, int current_priv);
       int get_current_privilege() const;     // è·å–å½“å‰ç™»å½•ç”¨æˆ·æƒé™
       std::string get_current_user_id() const;  // è·å–å½“å‰ç™»å½•ç”¨æˆ·ID
   };
   ```

### å…¶ä»–è¡¥å……è¯´æ˜

1. **æ–‡ä»¶IOä¼˜åŒ–**ï¼šé‡‡ç”¨é€è¡ŒæŸ¥æ‰¾ä¸å†™å…¥ï¼Œé¿å…å…¨é‡åŠ è½½æ•°æ®ï¼Œé€šè¿‡ç´¢å¼•æ ‡è®°å¸¸ç”¨æ•°æ®ä½ç½®æå‡æ•ˆç‡ã€‚
2. **é”™è¯¯å¤„ç†**ï¼šæ‰€æœ‰éæ³•æŒ‡ä»¤æˆ–æ“ä½œå¤±è´¥ï¼ˆå¦‚æƒé™ä¸è¶³ã€å‚æ•°æ— æ•ˆï¼‰å‡è¾“å‡º`Invalid\n`ï¼Œè¯¦ç»†é”™è¯¯åŸå› è®°å½•è‡³æ—¥å¿—æ–‡ä»¶ã€‚
3. **ç‰ˆæœ¬æ§åˆ¶**ï¼šéµå¾ªGitè§„èŒƒã€‚
4. **ä»£ç é£æ ¼**ï¼šé‡‡ç”¨ç»Ÿä¸€ä»£ç é£æ ¼ï¼ˆç¼©è¿›4ç©ºæ ¼ã€å‘½åè§„èŒƒï¼šç±»åPascalCaseï¼Œå‡½æ•°/å˜é‡åcamelCaseï¼‰ï¼Œæ·»åŠ å¿…è¦æ³¨é‡Šã€‚
5. **æ€§èƒ½**ï¼šé’ˆå¯¹é«˜é¢‘æ“ä½œï¼ˆå¦‚å›¾ä¹¦æŸ¥è¯¢ï¼‰é€šè¿‡å…³é”®è¯ç´¢å¼•æ–‡ä»¶åŠ é€Ÿå¤šæ¡ä»¶ç­›é€‰ã€‚
